{\rtf1\ansi\ansicpg1252\cocoartf1265\cocoasubrtf210
{\fonttbl\f0\fmodern\fcharset0 Courier;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww10800\viewh8400\viewkind0
\deftab720
\pard\pardeftab720

\f0\fs24 \cf0 @@ This is the third version of my WoD Mage node code. It still needs more commands added,\
@@ including the option to harvest Tass and feed familiars. This assumes you use Didi-style chargen.\
@@ I coded it to include the Quintessence/Paradox wheel limitations, as per 1st/2nd editon rules.\
@@\
@@ edit member(u(%#/BGNDS),6) so that #6 is whatever 'number' the Avatar background is in your stats code.\
\
@@ edit member(u(%#/powers),43) so that #43 is whatever 'number' the Prime power is in your stats code.\
\
@@ This is designed so that once per Vtime week, the node refreshes completely. \
@@ Our game uses 1st edition and Werewolf rules for node production: a node produces \
@@ 10x it's level in quint, and it's level in tass, each IC week. \
@@ You can adjust this as you see fit.\
\
@@ edit &tasspool me=5 and &quintpool me=50 so that the weekly totals are what you would like.\
\
@@ ediit convtime(get(lastz))),604800) so that the node refreshes at a rate other than weekly.\
@@ (replace 604800 with the number of secs in the time value you would like to refresh).\
\
@@ The node does not carry over 'old' tass, but, I'm trying to figure out a formula that resembles \
@@ the description in the 2nd edition rulebook (tass lasts 1 month).\
@@ This code contains many house rules, such as only 'rushing' an individual node once per week.\
@@ It also has a nifty little switch to check if Prime is a sphere that doens't require a focus\
@@ to lower the diff by one. However, it's specific to our game. If you peer at it, you may be\
@@ able to figure out your own version of it.\
\
@@ Pretty much anyone who uses this code needs to be willing to heavily customize it.\
@@ I figure this will mostly be useful for a basic framework which would be modified.\
\
@@ Requires the 'rolls' and 'stat' functions posted elsewhere on my site.\
\
@create Thundering Waterfall=10\
@Desc Thundering Waterfall=This is a thundering waterfall. *fall* *fall*. *thunder* *thunder*. *splash* *splash*.\
&CREDITS Thundering Waterfall=GwenNode V3. This node object coded by Gwen Morse (http://www.gwen-morse.com/wiki/index.php/MUSHcode). Most of the code by Gwen, with 'borrowed' the timelock code for the 'recharge' command from WoD generic Vampire Feeding Room code. Math help from Gary Weiner, and Regan@ManyMUs. \
&DO_RECHARGE Thundering Waterfall=$recharge:[setq(5,extract(u(%#/BGNDVALS),member(u(%#/BGNDS),6),1))];[setq(6,min(sub(%q5,u(%#/QUINT)),sub(20,u(%#/PARADOX))))]; @switch/first 0=gte(%q5,1),\{@pemit\'a0%# = NODE: You do not have a high enough Avatar Rating to Recharge.\},gt(%q6,0),\{@pemit\'a0%#=NODE: You cannot store more Quintessence in your Pattern by Recharging your Avatar at this time.\},[gte(v(quintpool),1)],\{@pemit\'a0%# = NODE: The node does not have enough quintessence left in it for you to Recharge your Avatar at this time.\},\{@pemit\'a0%# = NODE: The results of your Meditation attempt to connect to the node will be provided to you in one RL hour. Please wait here. Leaving this room early will *halt* the Meditation attempt. You may disconnect and allow the time to pass if you choose to.;&valid_%# me=1; [setq(7,rolls(add(stat(%#,Perception),stat(%#,Meditation)),7))]; [setq(8,min(%q6,%q7,u(quintpool)))]; @wait 3600 = @swi hasattr(me,valid_%#)=1,\{@swi gte(%q7,1) = 1,\{@pemit\'a0%# = NODE: You succeeded in your Meditation attempt to connect to the node, and gained\'a0%q8 point(s) of quintessence.; &QUINT\'a0%# = [add(get(%#/QUINT),%q8)]; &quintpool me = [sub(u(quintpool),%q8)]\},\{@pemit\'a0%# = NODE: You failed in your Meditation attempt to connect to the node.; &valid_%# me\}\}\}\
&DO_RUSH Thundering Waterfall=$rush:[setq(4,min(u(%#/QUINT),sub(20,u(%#/PARADOX))))]; [setq(7,v(quintpool))]; @switch/first 0 = member(u(%#/powers),43),\{@pemit\'a0%#=Huh? \\(Type "help" for help.\\)\},gt(%q4,0),\{@pemit\'a0%#=NODE: You cannot store more Quintessence in your Pattern by collecting a Rush at this time.\},gte(%q7,1),\{@pemit\'a0%# = NODE: The node does not have enough Quintessence in it for you to collect a Rush at this time.\},gt(sub(secs(),convtime(get(%#/rush-oak))),604800),\{@pemit\'a0%#=You must wait a RL week between attempts to collect Quintessence in a Rush from this node.\},\{[setq(5,rolls(u(%#/Arete),switch(strmatch(get(%#/focis),*<NR> Prime*),1,3,4)))]; [setq(6,min(%q4,%q5,%q7))]; @switch/first\'a0%q5 = <0,\{@pemit\'a0%# = NODE: You botched your attempt to connect to the node and collect Quintessence in a Rush.; &PARADOX\'a0%#=[add(1,get(%#/PARADOX))]\},0,\{@pemit\'a0%# = NODE: You failed in your attempt to connect to the node and collect Quintessence in a Rush.;\},\{@unlock\'a0%#/rush-oak; @pemit\'a0%# = NODE: You succeed in attempting to connect to the node, and collect\'a0%q6 point(s) of Quintessence in a Rush.; &rush-oak\'a0%#=time(); &QUINT\'a0%# = [add(get(%#/QUINT),%q6)]; &quintpool me = [sub(u(quintpool),%q6)]; @wait 0=@lock\'a0%#/rush-oak\}\}\
&DO_TASS Thundering Waterfall=$tass:@pemit\'a0%#=NODE: At this time, it is required for you to get Staff assistance in order to harvest Tass from this node.\
&ARRIVE-LIS Thundering Waterfall=^* has arrived.:@trigger me/startup\
&ARRIVE-LIS2 Thundering Waterfall=^* has connected.:@trigger me/startup\
&LEAVE-LIS Thundering Waterfall=^* has left.:@swi hasattr(me,valid_%#) = 1,\{@pemit\'a0%# = NODE: You left early, so your Meditation attempt to Recharge your Avatar has failed. You will not get any Quintessence.; &valid_%# me=\}\
&LEAVE-LIS2 Thundering Waterfall=^* goes home.:@swi hasattr(me,valid_%#) = 1,\{@pemit\'a0%# = NODE: You left early, so your Meditation attempt to Recharge your Avatar has failed. You will not get any Quintessence.; &valid_%# me=\}\
@Startup Thundering Waterfall=&current me = [secs()]; setq(0,div(sub(v(current),convtime(get(lastz))),604800)); setq(1,get(tasspool)); @switch gte(%q0,1) = 1,\{&lastz me=[time()]; &tasspool me=5; &quintpool me=50;\}\
&QUINTPOOL Thundering Waterfall=50\
&TASSPOOL Thundering Waterfall=5\
&CURRENT Thundering Waterfall=1000773858\
&LASTZ Thundering Waterfall=Mon Sep 17 18:44:18 2001\
@set Thundering Waterfall=MONITOR\
@set Thundering Waterfall=SAFE\
@set Thundering Waterfall=COMMANDS\
}